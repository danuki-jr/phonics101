{#
Input:
  Required
    content - raw html which is the default content of the body block

  Optional
    lightbox    : 'colorbox'
#}


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}ReadXYZ{% endblock %}</title>

  {% block metadata %}
    {% set bootstrap = bootstrap ?? true %}
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  {% endblock metadata %}
  {{ block('favicons', 'blocks.html.twig') }}
  {% block stylesheets %}
    <script src="https://kit.fontawesome.com/12c5ce46e9.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/bootstrap4-custom/bootstrap.min.css">

    <link rel="stylesheet" href="/css/colorbox/colorbox.css" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/phonics.css" media="all">

  {% endblock stylesheets %}
  {% block scripts %}
    <script src="/js/jquery-3.5.1.js"></script>
    <script src="/js/jquery.colorbox.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap4-custom/bootstrap.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script src="/js/phonics.js"></script>
    <script src="/js/timers.js"></script>



  {% endblock scripts %}
</head>

<body style="max-width: 1000px;">
{#<div id="page-wrapper" style="width: auto!important; max-width: 98%;  padding: 0.1em; margin:9px; ">#}
<div class="m-0 p-0">
  {# content comes from the page rendering of a template block like default_body_bs.html.twig. #}
  {{ block('statusModals', 'modal.html.twig') }}

  {% block body %}
    {{ content | raw }}
  {% endblock body %}
</div>

{% set clientProperties = ['screen.width', 'screen.height', 'window.innerWidth', 'window.innerHeight'] %}
{% for property in clientProperties %}
<form method='POST' id='data' style='display:none'>
{% endfor %}

{% block jqueryReady %}
  <script>
      $(document).ready(function () {
        {# when bootstrap modal is active, don't dim background #}
          $('.modal-backdrop').removeClass("modal-backdrop");

        {# bootstrap customized accordion #}
          // Add minus icon for collapse element which is open by default
          $(".collapse.show").each(function () {
              $(this).prev(".card-header").find(".fas").addClass("fa-minus-cirle").removeClass("fa-plus-circle");
          });

          // Toggle plus minus icon on show hide of collapse element
          $(".collapse").on('show.bs.collapse', function () {
              $(this).prev(".card-header").find(".fas").removeClass("fa-plus-circle").addClass("fa-minus-circle");
          }).on('hide.bs.collapse', function () {
              $(this).prev(".card-header").find(".fas").removeClass("fa-minus-circle").addClass("fa-plus-circle");
          });

          $('[data-toggle="tooltip"]').tooltip();
        {# bootstrap popover load url #}
        //   $('*[data-poload]').hover(function () {
        //       let e = $(this);
        //       e.off('hover');
        //       $.get(e.data('poload'), function (d) {
        //           e.popover({content: d}).popover('show');
        //       });
        //   });
        {{ otherJqueryReady|raw }}
      });

  </script>
  <script>

      $('document').ready(function () {
        {% if lightbox == 'colorbox' %}
          $(".ajax").colorbox();
          $(".tic-tac-toe").colorbox({
              iframe: true, innerWidth: "90%", maxWidth: "440px", innerHeight: "100%", maxHeight: "440px",
              top: 20, overlayClose: false, scrolling: false
          });
          $(".games").colorbox({iframe: true, width: "360px", maxWidth: "500px", height: "380px", top: 20, className: "gameFrame"});
          $(".sound-box").colorbox({
              iframe: true, innerWidth: 450, innerHeight: 400, top: 100, left: 100,
              scrolling: false, overlayClose: false
          });
          $(".advanced-spell").colorbox({
              iframe: true, innerWidth: 1000, innerHeight: 600, top: 100, left: 100,
              scrolling: false, overlayClose: false, escKey: false
          });
          $(".intro-image").colorbox({photo: true, innerWidth: 450, innerHeight: 500, top: 200});
          $(".iframe").colorbox({iframe: true, width: "80%", height: "80%"});
          $(".inline").colorbox({inline: true, width: "50%"});
          $(".info-box").colorbox({inline: true, width: 400, top: 50, left: 450});

          $.colorbox.settings.close = '<i class="fa fa-times-circle-o" aria-hidden="true" style="vertical-align: bottom"></i>';
        {% endif %}

          // disable parent scrolling when colorbox modal is active
          // reenable scrolling when colorbox modal is closed
          // see: https://www.geeksforgeeks.org/how-to-disable-scrolling-temporarily-using-javascript/
          $(document).bind('cbox_open', function () {
              $('html').addClass("body__scroll_disable");
          }).bind('cbox_cleanup', function () {
              $('html').removeClass("body__scroll_disable");
          });

          setScreenCookie();

          $( window ).resize(function() {
            setScreenCookie();
          });

      });

  </script>
{% endblock jqueryReady %}
<script>
    window.history.replaceState(null,null); //avoid form warning if user clicks refresh
</script>
</body>
</html>

{# defines blocks title, stylesheets, body, scripts #}
